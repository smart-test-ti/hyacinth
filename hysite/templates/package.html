{% extends 'site-base.html' %}
{% load static %}
{% block title %}应用列表 - 风信子{% endblock %}
{% block page_title %}应用列表{% endblock %}

{% block ms-auto %}
<div class="btn-list">
    <div class="input-icon">
        <span class="input-icon-addon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7" /><line x1="21" y1="21" x2="15" y2="15" /></svg>
        </span>
        <input  id="input-keywords" type="text" value="" class="form-control" placeholder="搜索APP" aria-label="Search in website">
    </div>
    <a class="btn btn-teal d-none d-sm-inline-block" onclick="searchAPP()">
        <svg t="1663586631472" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5525" width="200" height="200"><path d="M901.9 845.7L772.1 715.9c51.3-63 82.2-143.3 82.2-230.7 0-201.9-164.2-366.1-366.1-366.1S122.1 283.3 122.1 485.2s164.2 366.1 366.1 366.1c92 0 175.9-34.4 240.3-90.6l129.2 129.2 44.2-44.2z m-413.7-57c-167.4 0-303.6-136.2-303.6-303.5 0-167.4 136.2-303.6 303.6-303.6 167.4 0 303.5 136.2 303.5 303.6 0 167.4-136.1 303.5-303.5 303.5z" p-id="5526" data-spm-anchor-id="a313x.7781069.0.i2" class="selected" fill="#ffffff"></path><path d="M488.2 485.2m-223.1 0a223.1 223.1 0 1 0 446.2 0 223.1 223.1 0 1 0-446.2 0Z" fill="#ffffff" p-id="5527" data-spm-anchor-id="a313x.7781069.0.i4" class="selected"></path></svg>
        查询
    </a>
</div>


{% endblock %}

{% block page_body %}

<div class="row row-cards">
    {% for package in packages%}
    <div class="col-md-6 col-lg-3">
        <a class="card card-link cursor-pointer" onclick="viewVersionFile('{{ package.pkgname }}', '{{ package.newest_version }}')">
            <div class="card-stamp">
                <div class="card-stamp-icon bg-white">
                    {% if package.platform == "iOS" %}
                    <svg t="1662216122675" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8681" width="2000" height="2000"><path d="M959.9 310.4c2-43-4-86.1-17.7-127-22-52.2-66.2-91.8-120.4-108C786.4 66.6 750 62.7 713.5 64H310.4c-36.4-1.3-72.9 2.6-108.3 11.4-54.2 16.2-98.4 55.8-120.4 108-13.6 40.9-19.7 83.9-17.7 127v403.1c-1.9 43.1 4.1 86.1 17.7 127 22 52.2 66.2 91.8 120.4 108 35.4 8.8 71.8 12.7 108.3 11.4h403.1c36.4 1.3 72.9-2.6 108.3-11.4 54.2-16.2 98.4-55.8 120.4-108 13.6-40.9 19.7-83.9 17.7-127V310.4zM241.7 680h-33.3V481h33.3v199zM225 447.4c-11.4-0.1-20.6-9.4-20.5-20.9 0.1-11.4 9.4-20.6 20.9-20.5 11.3 0.1 20.5 9.3 20.5 20.7-0.1 11.5-9.4 20.8-20.9 20.7zM425.1 685c-87.9 0-143.3-62.8-143.3-162.7s55.3-162.9 143.3-162.9 143.5 63 143.5 162.9S513.3 685 425.1 685z m290.2 0c-66 0-112.4-36.4-115.7-90.8h30c3.3 37.9 38.9 63.6 88.4 63.6 47.3 0 81.2-25.8 81.2-61.2 0-29.5-20.4-47-67.2-58.8l-39.2-10.1c-58.4-14.9-84.4-39.6-84.4-81.2 0-51 45.9-87.3 108-87.3 61.6 0 106.4 36.4 108.3 86.4h-30c-2.8-35.6-34.4-59.3-79.2-59.3-43.7 0-76.1 24.3-76.1 59 0 27.1 19.6 43.1 66 54.9l34.2 8.8c63.4 16 90.1 40.3 90.1 84.2 0.1 55.5-44.6 91.8-114.4 91.8zM425.1 387.1c-69.1 0-112.6 52.3-112.6 135.2S356 657.2 425.1 657.2 538 604.9 538 522.3s-43.7-135.2-112.9-135.2z" p-id="8682" fill="#5d5beb"></path></svg>
                    {% else %}
                    <svg t="1662215887114" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2380" width="2000" height="2000"><path d="M985.742 749.896c0 130.902-106.178 237.004-237.17 237.004H274.298c-130.954 0-237.092-106.102-237.092-237.004V276.018c0-130.902 106.138-236.966 237.092-236.966h474.274c130.992 0 237.17 106.064 237.17 236.966v473.878z" fill="#85BF00" p-id="2381"></path><path d="M591.876 266.404l6.558-9.72 6.486-9.526 14.588-21.444a5.766 5.766 0 0 0-1.622-7.982c-2.702-1.736-6.33-1.042-8.104 1.62l-15.632 22.988-6.558 9.68-6.68 9.796c-21.036-8.062-44.616-12.534-69.434-12.534-24.818 0-48.362 4.472-69.474 12.534l-6.676-9.796-6.522-9.68-15.63-22.988c-1.776-2.622-5.404-3.356-8.106-1.62a5.696 5.696 0 0 0-1.584 7.982l14.552 21.444 6.484 9.526 6.6 9.72c-49.596 22.638-83.144 65.566-83.144 114.74h326.992c-0.002-49.174-33.578-92.102-83.094-114.74z m-150.448 68.882c-9.69 0-17.524-7.714-17.524-17.202 0-9.526 7.834-17.202 17.524-17.202 9.686 0 17.484 7.674 17.484 17.202 0 9.488-7.798 17.202-17.484 17.202z m140.104 0c-9.69 0-17.484-7.714-17.484-17.202 0-9.526 7.794-17.202 17.484-17.202 9.686 0 17.524 7.674 17.524 17.202-0.002 9.488-7.84 17.202-17.524 17.202zM674.968 656.33V404.054H347.978v252.276c0 20.018 16.578 36.33 37.024 36.33h26.668c-0.886 3.01-1.428 6.21-1.428 9.528v72.624c0 18.976 15.71 34.364 35.084 34.364 19.334 0 35.044-15.386 35.044-34.364V702.188c0-3.316-0.54-6.518-1.428-9.528h65.034a35.046 35.046 0 0 0-1.348 9.528v72.624c0 18.976 15.708 34.364 35.042 34.364 19.3 0 35.008-15.386 35.008-34.364V702.188c0-3.316-0.5-6.518-1.388-9.528H638c20.374 0 36.968-16.312 36.968-36.33zM254.576 438.458v147.178c0 18.974 15.668 34.366 35.044 34.366 19.318 0 35.024-15.39 35.024-34.366v-147.178c0-19.014-15.708-34.402-35.024-34.402-19.376-0.002-35.044 15.386-35.044 34.402zM698.322 438.458v147.178c0 18.974 15.668 34.366 35.006 34.366 19.376 0 35.042-15.39 35.042-34.366v-147.178c0-19.014-15.668-34.402-35.042-34.402-19.338-0.002-35.006 15.386-35.006 34.402z" fill="#FFFFFF" p-id="2382"></path><path d="M591.876 266.404l6.558-9.72 6.486-9.526 14.588-21.444a5.766 5.766 0 0 0-1.622-7.982c-2.702-1.736-6.33-1.042-8.104 1.62l-15.632 22.988-6.558 9.68-6.68 9.796c-21.036-8.062-44.616-12.534-69.434-12.534-24.818 0-48.362 4.472-69.474 12.534l-6.676-9.796-6.522-9.68-15.63-22.988c-1.776-2.622-5.404-3.356-8.106-1.62a5.696 5.696 0 0 0-1.584 7.982l14.552 21.444 6.484 9.526 6.6 9.72c-49.596 22.638-83.144 65.566-83.144 114.74h326.992c-0.002-49.174-33.578-92.102-83.094-114.74z m-150.448 68.882c-9.69 0-17.524-7.714-17.524-17.202 0-9.526 7.834-17.202 17.524-17.202 9.686 0 17.484 7.674 17.484 17.202 0 9.488-7.798 17.202-17.484 17.202z m140.104 0c-9.69 0-17.484-7.714-17.484-17.202 0-9.526 7.794-17.202 17.484-17.202 9.686 0 17.524 7.674 17.524 17.202-0.002 9.488-7.84 17.202-17.524 17.202zM674.968 656.33V404.054H347.978v252.276c0 20.018 16.578 36.33 37.024 36.33h26.668c-0.886 3.01-1.428 6.21-1.428 9.528v72.624c0 18.976 15.71 34.364 35.084 34.364 19.334 0 35.044-15.386 35.044-34.364V702.188c0-3.316-0.54-6.518-1.428-9.528h65.034a35.046 35.046 0 0 0-1.348 9.528v72.624c0 18.976 15.708 34.364 35.042 34.364 19.3 0 35.008-15.386 35.008-34.364V702.188c0-3.316-0.5-6.518-1.388-9.528H638c20.374 0 36.968-16.312 36.968-36.33zM254.576 438.458v147.178c0 18.974 15.668 34.366 35.044 34.366 19.318 0 35.024-15.39 35.024-34.366v-147.178c0-19.014-15.708-34.402-35.024-34.402-19.376-0.002-35.044 15.386-35.044 34.402zM698.322 438.458v147.178c0 18.974 15.668 34.366 35.006 34.366 19.376 0 35.042-15.39 35.042-34.366v-147.178c0-19.014-15.668-34.402-35.042-34.402-19.338-0.002-35.006 15.386-35.006 34.402z" fill="#FFFFFF" p-id="2383"></path><path d="M614.646 216.778c1.114 0 2.24 0.31 3.24 0.952a5.766 5.766 0 0 1 1.622 7.982l-14.588 21.444-6.486 9.526-6.558 9.72c49.518 22.638 83.094 65.566 83.094 114.74H347.976c0-49.174 33.548-92.102 83.144-114.74l-6.6-9.72-6.484-9.526-14.552-21.444a5.694 5.694 0 0 1 1.584-7.982 5.94 5.94 0 0 1 3.216-0.942c1.904 0 3.768 0.904 4.89 2.562l15.63 22.988 6.522 9.68 6.676 9.796c21.114-8.062 44.658-12.534 69.474-12.534 24.818 0 48.398 4.472 69.434 12.534l6.68-9.796 6.558-9.68 15.632-22.988a5.822 5.822 0 0 1 4.866-2.572m-33.114 118.508c9.686 0 17.524-7.714 17.524-17.202 0-9.526-7.838-17.202-17.524-17.202-9.69 0-17.484 7.674-17.484 17.202-0.002 9.488 7.794 17.202 17.484 17.202m-140.104 0c9.686 0 17.484-7.714 17.484-17.202 0-9.526-7.796-17.202-17.484-17.202-9.69 0-17.524 7.674-17.524 17.202 0 9.488 7.834 17.202 17.524 17.202m173.218-138.262a25.532 25.532 0 0 0-21.23 11.266l-15.6 22.94-4.788 7.064c-19.608-5.822-40.246-8.766-61.55-8.766-21.272 0-41.916 2.946-61.574 8.774l-4.716-7-15.678-23.056a25.596 25.596 0 0 0-21.224-11.208c-4.938 0-9.742 1.41-13.894 4.076l-0.276 0.18a25.346 25.346 0 0 0-10.912 16.348 25.268 25.268 0 0 0 3.954 19.194l14.534 21.416 0.728 1.07c-46.278 28.336-74.196 73.41-74.196 121.826 0 10.91 8.844 19.754 19.754 19.754h326.992c10.91 0 19.754-8.844 19.754-19.754 0-48.4-27.914-93.48-74.18-121.832l0.706-1.036 14.594-21.452 0.204-0.306c7.642-11.698 4.406-27.504-7.216-35.236a25.7 25.7 0 0 0-14.186-4.262z m60.322 207.03v252.276c0 20.018-16.596 36.33-36.97 36.33h-26.71c0.888 3.01 1.388 6.21 1.388 9.528v72.624c0 18.976-15.708 34.364-35.008 34.364-19.334 0-35.042-15.386-35.042-34.364V702.188c0-3.316 0.498-6.518 1.348-9.528H478.94a33.66 33.66 0 0 1 1.428 9.528v72.624c0 18.976-15.708 34.364-35.044 34.364-19.376 0-35.084-15.386-35.084-34.364V702.188c0-3.316 0.542-6.518 1.428-9.528H385c-20.446 0-37.024-16.312-37.024-36.33V404.054H674.968m0-19.754H347.978c-10.91 0-19.754 8.844-19.754 19.754v252.276c0 30.926 25.47 56.084 56.778 56.084h5.486v62.398c0 29.84 24.6 54.118 54.838 54.118 30.216 0 54.798-24.278 54.798-54.118v-62.398h22.75v62.398c0 29.84 24.58 54.118 54.794 54.118 30.196 0 54.762-24.278 54.762-54.118v-62.398h5.568c31.278 0 56.724-25.158 56.724-56.084V404.054c0-10.91-8.844-19.754-19.754-19.754z m-385.348 19.754c19.318 0 35.024 15.388 35.024 34.402v147.178c0 18.974-15.708 34.366-35.024 34.366-19.376 0-35.044-15.39-35.044-34.366v-147.178c0-19.014 15.668-34.402 35.044-34.402m0-19.754c-30.216 0-54.798 24.294-54.798 54.156v147.178c0 29.842 24.582 54.12 54.798 54.12 30.206 0 54.778-24.278 54.778-54.12v-147.178c0-29.862-24.572-54.156-54.778-54.156z m443.708 19.754c19.376 0 35.042 15.388 35.042 34.402v147.178c0 18.974-15.668 34.366-35.042 34.366-19.338 0-35.006-15.39-35.006-34.366v-147.178c0-19.014 15.668-34.402 35.006-34.402m0-19.754c-30.196 0-54.76 24.294-54.76 54.156v147.178c0 29.842 24.564 54.12 54.76 54.12 30.214 0 54.796-24.278 54.796-54.12v-147.178c0.002-29.862-24.582-54.156-54.796-54.156z" fill="#436000" p-id="2384"></path><path d="M728.078 956.122H294.83c-124.896 0-226.506-101.636-226.506-226.566V296.358c0-124.908 101.61-226.526 226.506-226.526h433.248c124.918 0 226.544 101.62 226.544 226.526v433.198c0.002 124.928-101.626 226.566-226.544 226.566zM294.83 89.636c-113.976 0-206.702 92.734-206.702 206.72v433.198c0 114.008 92.726 206.762 206.702 206.762h433.248c113.996 0 206.74-92.754 206.74-206.762V296.358c0-113.986-92.744-206.72-206.74-206.72H294.83z" fill="#436000" p-id="2385"></path></svg>
                    {% endif %}
                </div>
              </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-auto">
                        {% if package.icon and package.icon != "" %}
                        <span class="avatar" style="background-image: url(/static/logo/{{ package.icon }});background-color:transparent;"></span>
                        {% else %}
                        <span class="avatar" style="background-image: url(/static/image/app.png);background-color:transparent;"></span>
                        {% endif %}
                    </div>
                    <div class="col">
                        <div class="font-weight-medium app-name" style="font-weight: bolder">{{ package.pkgname }}</div>
                        {% if package.newest_version %}
                        <div class="text-muted">最新版本: v{{ package.newest_version }}</div>
                        {% else %}
                        <div class="text-muted">没有版本</div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </a>
    </div>
    {% empty %}
    <div class="empty">
            <div class="empty-img">
                <?xml version="1.0" encoding="UTF-8"?>
                    <svg width="244px" height="208px" viewBox="0 0 244 208" version="1.1" xmlns="http://www.w3.org/2000/svg">
                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="亮背景时使用" transform="translate(-544.000000, -904.000000)">
                                <g id="暂无相关搜索、搜索、帮助、疑问" transform="translate(544.000000, 904.000000)">
                                    <g id="背景/彩">
                                        <g id="-">
                                            <g id="编组" transform="translate(28.400000, 18.400000)">
                                                <polyline id="路径" stroke="#DEF5FF" stroke-width="40" stroke-linecap="round" stroke-linejoin="round" points="121.6 27.4476562 49.6 71.0238281 121.6 66.6 129.6 66.6 72.167827 114.6"></polyline>
                                                <path d="M1.6,146.2 C0.7163444,146.2 -5.68434189e-14,145.483656 -5.68434189e-14,144.6 C-5.68434189e-14,143.716344 0.7163444,143 1.6,143 L141.6,143 C142.483656,143 143.2,143.716344 143.2,144.6 C143.2,145.483656 142.483656,146.2 141.6,146.2 L1.6,146.2 Z M149.6,146.2 C148.716344,146.2 148,145.483656 148,144.6 C148,143.716344 148.716344,143 149.6,143 L154.6,143 C155.483656,143 156.2,143.716344 156.2,144.6 C156.2,145.483656 155.483656,146.2 154.6,146.2 L149.6,146.2 Z M167.6,146.2 C166.716344,146.2 166,145.483656 166,144.6 C166,143.716344 166.716344,143 167.6,143 L185.6,143 C186.483656,143 187.2,143.716344 187.2,144.6 C187.2,145.483656 186.483656,146.2 185.6,146.2 L167.6,146.2 Z M47.6,161.2 C46.7163444,161.2 46,160.483656 46,159.6 C46,158.716344 46.7163444,158 47.6,158 L61.6,158 C62.4836556,158 63.2,158.716344 63.2,159.6 C63.2,160.483656 62.4836556,161.2 61.6,161.2 L47.6,161.2 Z M70.6,161.2 C69.7163444,161.2 69,160.483656 69,159.6 C69,158.716344 69.7163444,158 70.6,158 L131.6,158 C132.483656,158 133.2,158.716344 133.2,159.6 C133.2,160.483656 132.483656,161.2 131.6,161.2 L70.6,161.2 Z M160,105.6 C160,103.466667 163.2,103.466667 163.2,105.6 L163.2,111.6 C163.2,112.483656 162.483656,113.2 161.6,113.2 L155.6,113.2 C153.466667,113.2 153.466667,110 155.6,110 L160,110 L160,105.6 Z M163.2,117.6 C163.2,119.733333 160,119.733333 160,117.6 L160,111.6 C160,110.716344 160.716344,110 161.6,110 L167.6,110 C169.733333,110 169.733333,113.2 167.6,113.2 L163.2,113.2 L163.2,117.6 Z M8,57.6 C8,55.4666667 11.2,55.4666667 11.2,57.6 L11.2,63.6 C11.2,64.4836556 10.4836556,65.2 9.6,65.2 L3.6,65.2 C1.46666667,65.2 1.46666667,62 3.6,62 L8,62 L8,57.6 Z M156.2,7 L161.6,7 C163.733333,7 163.733333,10.2 161.6,10.2 L156.2,10.2 L156.2,15.6 C156.2,17.7333333 153,17.7333333 153,15.6 L153,10.2 L147.6,10.2 C145.466667,10.2 145.466667,7 147.6,7 L153,7 L153,1.6 C153,-0.533333333 156.2,-0.533333333 156.2,1.6 L156.2,7 Z M11.2,69.6 C11.2,71.7333333 8,71.7333333 8,69.6 L8,63.6 C8,62.7163444 8.7163444,62 9.6,62 L15.6,62 C17.7333333,62 17.7333333,65.2 15.6,65.2 L11.2,65.2 L11.2,69.6 Z" id="Path-2" fill="#333745" fill-rule="nonzero"></path>
                                                <path d="M28.1857864,122.286292 C29.1285955,121.343482 30.542809,122.757696 29.6,123.700505 L27.4786797,125.821825 C27.0881554,126.21235 26.4549904,126.21235 26.0644661,125.821825 L23.9431458,123.700505 C23.0003367,122.757696 24.4145503,121.343482 25.3573593,122.286292 L26.7715729,123.700505 L28.1857864,122.286292 Z M25.3573593,127.943146 C24.4145503,128.885955 23.0003367,127.471741 23.9431458,126.528932 L26.0644661,124.407612 C26.4549904,124.017088 27.0881554,124.017088 27.4786797,124.407612 L29.6,126.528932 C30.542809,127.471741 29.1285955,128.885955 28.1857864,127.943146 L26.7715729,126.528932 L25.3573593,127.943146 Z M45.8426407,17.6 C46.7854497,16.657191 48.1996633,18.0714045 47.2568542,19.0142136 L45.1355339,21.1355339 C44.7450096,21.5260582 44.1118446,21.5260582 43.7213203,21.1355339 L41.6,19.0142136 C40.657191,18.0714045 42.0714045,16.657191 43.0142136,17.6 L44.4284271,19.0142136 L45.8426407,17.6 Z M43.0142136,23.2568542 C42.0714045,24.1996633 40.657191,22.7854497 41.6,21.8426407 L43.7213203,19.7213203 C44.1118446,19.3307961 44.7450096,19.3307961 45.1355339,19.7213203 L47.2568542,21.8426407 C48.1996633,22.7854497 46.7854497,24.1996633 45.8426407,23.2568542 L44.4284271,21.8426407 L43.0142136,23.2568542 Z" id="Path复制" fill="#657180" fill-rule="nonzero"></path>
                                            </g>
                                        </g>
                                    </g>
                                    <g id="Group-6" transform="translate(74.000000, 58.000000)">
                                        <g id="分组">
                                            <path d="M6,-1.0658141e-14 L70,-1.0658141e-14 C73.3137085,-1.12668594e-14 76,2.6862915 76,6 L76,84 C76,87.3137085 73.3137085,90 70,90 L6,90 C2.6862915,90 4.05812251e-16,87.3137085 0,84 L0,6 C-4.05812251e-16,2.6862915 2.6862915,-1.00494227e-14 6,-1.0658141e-14 Z" id="矩形" fill="#FDFFED"></path>
                                            <path d="M76,78.5908203 L76,84 C76,87.3137085 73.3137085,90 70,90 L6,90 C2.6862915,90 4.05812251e-16,87.3137085 0,84 L0,6 C-4.05812251e-16,2.6862915 2.6862915,-1.00494227e-14 6,-1.0658141e-14 L6,-1.0658141e-14 L70,-1.0658141e-14 C73.3137085,-1.12668594e-14 76,2.6862915 76,6 L76,6" id="路径" stroke="#333745" stroke-width="3.2" stroke-linecap="round"></path>
                                            <path d="M15.6,53.6 L25.6,53.6 L15.6,53.6 Z M15.6,39.6 L23.6,39.6 L15.6,39.6 Z M15.6,25.6 L27.6,25.6 L15.6,25.6 Z" id="Stroke-16" stroke="#333745" stroke-width="2.8" stroke-linecap="round" stroke-linejoin="round"></path>
                                        </g>
                                        <g id="分组-2" transform="translate(30.000000, 8.000000)">
                                            <path d="M53.6900461,50.0203149 L65.6900461,50.0203149 L65.6740471,71.8249332 C65.6716152,75.1393527 62.9840651,77.8249316 59.6696447,77.8249316 L59.6696447,77.8249316 C56.3583667,77.8249316 53.6740455,75.1406104 53.6740455,71.8293325 C53.6740455,71.827866 53.6740461,71.8263996 53.6740471,71.8249332 L53.6900461,50.0203149 Z" id="矩形" stroke="#333745" stroke-width="3.2" fill="#D0E639" transform="translate(59.679845, 63.922623) rotate(-42.000000) translate(-59.679845, -63.922623) "></path>
                                            <circle id="椭圆形" stroke="#333745" stroke-width="3.2" fill="#D0E639" cx="33" cy="33" r="33"></circle>
                                            <circle id="椭圆形-copy" stroke="#333745" stroke-width="3.2" fill="#FBFFE3" cx="33" cy="33" r="25"></circle>
                                            <path d="M35.2263184,39.37 C34.6182335,39.5850928 31.4098378,39.6020605 30.8698378,39.37 C30.3298378,39.1379395 30.2698378,38.86 30.2698378,37.99 C30.2698378,35.92 30.6298378,34.72 31.5898378,33.55 C32.3098378,32.71 32.5498378,32.53 34.6798378,31.24 C36.1498378,30.37 36.6298378,29.74 36.6298378,28.75 C36.6298378,27.34 35.5798378,26.5 33.7798378,26.5 C32.4298378,26.5 31.4398378,26.98 30.8698378,27.91 C30.5698378,28.39 30.3898378,28.5682568 30.3298378,29.74 C30.2698378,30.9117432 23.9638672,31.24 24.1498378,29.17 C24.3358084,27.1 24.9298378,25.84 26.0698378,24.58 C27.8098378,22.6 30.4798378,21.58 33.9298378,21.58 C39.4498378,21.58 42.8998378,24.19 42.8998378,28.33 C42.8998378,30.16 42.2998378,31.57 41.0398378,32.74 C40.3198378,33.4 40.0198378,33.61 37.4098378,35.23 C36.1498378,36.04 35.6998378,36.82 35.6998378,38.2 C35.6998378,38.56 35.8344032,39.1549072 35.2263184,39.37 Z M32.8348378,41.41 L33.1948378,41.41 C34.7605651,41.41 36.0298378,42.6792727 36.0298378,44.245 L36.0298378,44.245 C36.0298378,45.8107273 34.7605651,47.08 33.1948378,47.08 L32.8348378,47.08 C31.2691105,47.08 29.9998378,45.8107273 29.9998378,44.245 L29.9998378,44.245 C29.9998378,42.6792727 31.2691105,41.41 32.8348378,41.41 Z" id="？" fill="#333745" fill-rule="nonzero"></path>
                                        </g>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </svg>
                </div>
                <p class="empty-title">未发现应用记录</p>
                {% if role == '超级管理员' or role == '管理员' %}
                <div class="empty-action">
                    <a  class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modal-new-app">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>
                        创建应用
                    </a>
                </div>
                {% endif %}
            </div>
    {% endfor %}
</div>
<div class="modal modal-blur fade" id="modal-new-app" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">创建应用</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="form-selectgroup-boxes row">
                    <div class="col-lg-6">
                        <label class="form-selectgroup-item">
                            <input type="radio" name="platform" value="Android" class="form-selectgroup-input" checked>
                            <span class="form-selectgroup-label d-flex align-items-center p-3">
                                <span class="me-3">
                                    <span class="form-selectgroup-check"></span>
                                </span>
                                <span class="form-selectgroup-label-content">
                                    <span class="form-selectgroup-title strong mb-1">
                                        <span class="me-2">
                                            <svg t="1662215887114" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2380" width="2000" height="2000"><path d="M985.742 749.896c0 130.902-106.178 237.004-237.17 237.004H274.298c-130.954 0-237.092-106.102-237.092-237.004V276.018c0-130.902 106.138-236.966 237.092-236.966h474.274c130.992 0 237.17 106.064 237.17 236.966v473.878z" fill="#85BF00" p-id="2381"></path><path d="M591.876 266.404l6.558-9.72 6.486-9.526 14.588-21.444a5.766 5.766 0 0 0-1.622-7.982c-2.702-1.736-6.33-1.042-8.104 1.62l-15.632 22.988-6.558 9.68-6.68 9.796c-21.036-8.062-44.616-12.534-69.434-12.534-24.818 0-48.362 4.472-69.474 12.534l-6.676-9.796-6.522-9.68-15.63-22.988c-1.776-2.622-5.404-3.356-8.106-1.62a5.696 5.696 0 0 0-1.584 7.982l14.552 21.444 6.484 9.526 6.6 9.72c-49.596 22.638-83.144 65.566-83.144 114.74h326.992c-0.002-49.174-33.578-92.102-83.094-114.74z m-150.448 68.882c-9.69 0-17.524-7.714-17.524-17.202 0-9.526 7.834-17.202 17.524-17.202 9.686 0 17.484 7.674 17.484 17.202 0 9.488-7.798 17.202-17.484 17.202z m140.104 0c-9.69 0-17.484-7.714-17.484-17.202 0-9.526 7.794-17.202 17.484-17.202 9.686 0 17.524 7.674 17.524 17.202-0.002 9.488-7.84 17.202-17.524 17.202zM674.968 656.33V404.054H347.978v252.276c0 20.018 16.578 36.33 37.024 36.33h26.668c-0.886 3.01-1.428 6.21-1.428 9.528v72.624c0 18.976 15.71 34.364 35.084 34.364 19.334 0 35.044-15.386 35.044-34.364V702.188c0-3.316-0.54-6.518-1.428-9.528h65.034a35.046 35.046 0 0 0-1.348 9.528v72.624c0 18.976 15.708 34.364 35.042 34.364 19.3 0 35.008-15.386 35.008-34.364V702.188c0-3.316-0.5-6.518-1.388-9.528H638c20.374 0 36.968-16.312 36.968-36.33zM254.576 438.458v147.178c0 18.974 15.668 34.366 35.044 34.366 19.318 0 35.024-15.39 35.024-34.366v-147.178c0-19.014-15.708-34.402-35.024-34.402-19.376-0.002-35.044 15.386-35.044 34.402zM698.322 438.458v147.178c0 18.974 15.668 34.366 35.006 34.366 19.376 0 35.042-15.39 35.042-34.366v-147.178c0-19.014-15.668-34.402-35.042-34.402-19.338-0.002-35.006 15.386-35.006 34.402z" fill="#FFFFFF" p-id="2382"></path><path d="M591.876 266.404l6.558-9.72 6.486-9.526 14.588-21.444a5.766 5.766 0 0 0-1.622-7.982c-2.702-1.736-6.33-1.042-8.104 1.62l-15.632 22.988-6.558 9.68-6.68 9.796c-21.036-8.062-44.616-12.534-69.434-12.534-24.818 0-48.362 4.472-69.474 12.534l-6.676-9.796-6.522-9.68-15.63-22.988c-1.776-2.622-5.404-3.356-8.106-1.62a5.696 5.696 0 0 0-1.584 7.982l14.552 21.444 6.484 9.526 6.6 9.72c-49.596 22.638-83.144 65.566-83.144 114.74h326.992c-0.002-49.174-33.578-92.102-83.094-114.74z m-150.448 68.882c-9.69 0-17.524-7.714-17.524-17.202 0-9.526 7.834-17.202 17.524-17.202 9.686 0 17.484 7.674 17.484 17.202 0 9.488-7.798 17.202-17.484 17.202z m140.104 0c-9.69 0-17.484-7.714-17.484-17.202 0-9.526 7.794-17.202 17.484-17.202 9.686 0 17.524 7.674 17.524 17.202-0.002 9.488-7.84 17.202-17.524 17.202zM674.968 656.33V404.054H347.978v252.276c0 20.018 16.578 36.33 37.024 36.33h26.668c-0.886 3.01-1.428 6.21-1.428 9.528v72.624c0 18.976 15.71 34.364 35.084 34.364 19.334 0 35.044-15.386 35.044-34.364V702.188c0-3.316-0.54-6.518-1.428-9.528h65.034a35.046 35.046 0 0 0-1.348 9.528v72.624c0 18.976 15.708 34.364 35.042 34.364 19.3 0 35.008-15.386 35.008-34.364V702.188c0-3.316-0.5-6.518-1.388-9.528H638c20.374 0 36.968-16.312 36.968-36.33zM254.576 438.458v147.178c0 18.974 15.668 34.366 35.044 34.366 19.318 0 35.024-15.39 35.024-34.366v-147.178c0-19.014-15.708-34.402-35.024-34.402-19.376-0.002-35.044 15.386-35.044 34.402zM698.322 438.458v147.178c0 18.974 15.668 34.366 35.006 34.366 19.376 0 35.042-15.39 35.042-34.366v-147.178c0-19.014-15.668-34.402-35.042-34.402-19.338-0.002-35.006 15.386-35.006 34.402z" fill="#FFFFFF" p-id="2383"></path><path d="M614.646 216.778c1.114 0 2.24 0.31 3.24 0.952a5.766 5.766 0 0 1 1.622 7.982l-14.588 21.444-6.486 9.526-6.558 9.72c49.518 22.638 83.094 65.566 83.094 114.74H347.976c0-49.174 33.548-92.102 83.144-114.74l-6.6-9.72-6.484-9.526-14.552-21.444a5.694 5.694 0 0 1 1.584-7.982 5.94 5.94 0 0 1 3.216-0.942c1.904 0 3.768 0.904 4.89 2.562l15.63 22.988 6.522 9.68 6.676 9.796c21.114-8.062 44.658-12.534 69.474-12.534 24.818 0 48.398 4.472 69.434 12.534l6.68-9.796 6.558-9.68 15.632-22.988a5.822 5.822 0 0 1 4.866-2.572m-33.114 118.508c9.686 0 17.524-7.714 17.524-17.202 0-9.526-7.838-17.202-17.524-17.202-9.69 0-17.484 7.674-17.484 17.202-0.002 9.488 7.794 17.202 17.484 17.202m-140.104 0c9.686 0 17.484-7.714 17.484-17.202 0-9.526-7.796-17.202-17.484-17.202-9.69 0-17.524 7.674-17.524 17.202 0 9.488 7.834 17.202 17.524 17.202m173.218-138.262a25.532 25.532 0 0 0-21.23 11.266l-15.6 22.94-4.788 7.064c-19.608-5.822-40.246-8.766-61.55-8.766-21.272 0-41.916 2.946-61.574 8.774l-4.716-7-15.678-23.056a25.596 25.596 0 0 0-21.224-11.208c-4.938 0-9.742 1.41-13.894 4.076l-0.276 0.18a25.346 25.346 0 0 0-10.912 16.348 25.268 25.268 0 0 0 3.954 19.194l14.534 21.416 0.728 1.07c-46.278 28.336-74.196 73.41-74.196 121.826 0 10.91 8.844 19.754 19.754 19.754h326.992c10.91 0 19.754-8.844 19.754-19.754 0-48.4-27.914-93.48-74.18-121.832l0.706-1.036 14.594-21.452 0.204-0.306c7.642-11.698 4.406-27.504-7.216-35.236a25.7 25.7 0 0 0-14.186-4.262z m60.322 207.03v252.276c0 20.018-16.596 36.33-36.97 36.33h-26.71c0.888 3.01 1.388 6.21 1.388 9.528v72.624c0 18.976-15.708 34.364-35.008 34.364-19.334 0-35.042-15.386-35.042-34.364V702.188c0-3.316 0.498-6.518 1.348-9.528H478.94a33.66 33.66 0 0 1 1.428 9.528v72.624c0 18.976-15.708 34.364-35.044 34.364-19.376 0-35.084-15.386-35.084-34.364V702.188c0-3.316 0.542-6.518 1.428-9.528H385c-20.446 0-37.024-16.312-37.024-36.33V404.054H674.968m0-19.754H347.978c-10.91 0-19.754 8.844-19.754 19.754v252.276c0 30.926 25.47 56.084 56.778 56.084h5.486v62.398c0 29.84 24.6 54.118 54.838 54.118 30.216 0 54.798-24.278 54.798-54.118v-62.398h22.75v62.398c0 29.84 24.58 54.118 54.794 54.118 30.196 0 54.762-24.278 54.762-54.118v-62.398h5.568c31.278 0 56.724-25.158 56.724-56.084V404.054c0-10.91-8.844-19.754-19.754-19.754z m-385.348 19.754c19.318 0 35.024 15.388 35.024 34.402v147.178c0 18.974-15.708 34.366-35.024 34.366-19.376 0-35.044-15.39-35.044-34.366v-147.178c0-19.014 15.668-34.402 35.044-34.402m0-19.754c-30.216 0-54.798 24.294-54.798 54.156v147.178c0 29.842 24.582 54.12 54.798 54.12 30.206 0 54.778-24.278 54.778-54.12v-147.178c0-29.862-24.572-54.156-54.778-54.156z m443.708 19.754c19.376 0 35.042 15.388 35.042 34.402v147.178c0 18.974-15.668 34.366-35.042 34.366-19.338 0-35.006-15.39-35.006-34.366v-147.178c0-19.014 15.668-34.402 35.006-34.402m0-19.754c-30.196 0-54.76 24.294-54.76 54.156v147.178c0 29.842 24.564 54.12 54.76 54.12 30.214 0 54.796-24.278 54.796-54.12v-147.178c0.002-29.862-24.582-54.156-54.796-54.156z" fill="#436000" p-id="2384"></path><path d="M728.078 956.122H294.83c-124.896 0-226.506-101.636-226.506-226.566V296.358c0-124.908 101.61-226.526 226.506-226.526h433.248c124.918 0 226.544 101.62 226.544 226.526v433.198c0.002 124.928-101.626 226.566-226.544 226.566zM294.83 89.636c-113.976 0-206.702 92.734-206.702 206.72v433.198c0 114.008 92.726 206.762 206.702 206.762h433.248c113.996 0 206.74-92.754 206.74-206.762V296.358c0-113.986-92.744-206.72-206.74-206.72H294.83z" fill="#436000" p-id="2385"></path></svg>
                                        </span>
                                        Android
                                    </span>
                                </span>
                            </span>
                        </label>
                    </div>
                    <div class="col-lg-6">
                        <label class="form-selectgroup-item">
                            <input type="radio" name="platform" value="iOS" class="form-selectgroup-input">
                            <span class="form-selectgroup-label d-flex align-items-center p-3">
                                <span class="me-3">
                                    <span class="form-selectgroup-check"></span>
                                </span>
                                <span class="form-selectgroup-label-content">
                                    <span class="form-selectgroup-title strong mb-1">
                                        <span class="me-2">
                                            <svg t="1662216122675" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8681" width="2000" height="2000"><path d="M959.9 310.4c2-43-4-86.1-17.7-127-22-52.2-66.2-91.8-120.4-108C786.4 66.6 750 62.7 713.5 64H310.4c-36.4-1.3-72.9 2.6-108.3 11.4-54.2 16.2-98.4 55.8-120.4 108-13.6 40.9-19.7 83.9-17.7 127v403.1c-1.9 43.1 4.1 86.1 17.7 127 22 52.2 66.2 91.8 120.4 108 35.4 8.8 71.8 12.7 108.3 11.4h403.1c36.4 1.3 72.9-2.6 108.3-11.4 54.2-16.2 98.4-55.8 120.4-108 13.6-40.9 19.7-83.9 17.7-127V310.4zM241.7 680h-33.3V481h33.3v199zM225 447.4c-11.4-0.1-20.6-9.4-20.5-20.9 0.1-11.4 9.4-20.6 20.9-20.5 11.3 0.1 20.5 9.3 20.5 20.7-0.1 11.5-9.4 20.8-20.9 20.7zM425.1 685c-87.9 0-143.3-62.8-143.3-162.7s55.3-162.9 143.3-162.9 143.5 63 143.5 162.9S513.3 685 425.1 685z m290.2 0c-66 0-112.4-36.4-115.7-90.8h30c3.3 37.9 38.9 63.6 88.4 63.6 47.3 0 81.2-25.8 81.2-61.2 0-29.5-20.4-47-67.2-58.8l-39.2-10.1c-58.4-14.9-84.4-39.6-84.4-81.2 0-51 45.9-87.3 108-87.3 61.6 0 106.4 36.4 108.3 86.4h-30c-2.8-35.6-34.4-59.3-79.2-59.3-43.7 0-76.1 24.3-76.1 59 0 27.1 19.6 43.1 66 54.9l34.2 8.8c63.4 16 90.1 40.3 90.1 84.2 0.1 55.5-44.6 91.8-114.4 91.8zM425.1 387.1c-69.1 0-112.6 52.3-112.6 135.2S356 657.2 425.1 657.2 538 604.9 538 522.3s-43.7-135.2-112.9-135.2z" p-id="8682" fill="#5d5beb"></path></svg>
                                        </span>
                                        iOS
                                    </span>
                                </span>
                            </span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="upload-logo">
                    <div class="row">
                        <div class="col-auto">
                            <form  method="post" enctype="multipart/form-data">
                                <input type="file" id="select-file" class="form-control"   name="file" accept="image/*">
                            </form>

                        </div>
                        <div class="col-auto">
                            <a id="upload-file" class="btn btn-default" onclick="uploadFile()">
                                <svg t="1641460072887" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="22281" width="200" height="200"><path d="M753.2032 116.3264H271.104c-84.1728 0-152.6784 68.5056-152.6784 152.6784v487.936c0 84.1728 68.5056 152.6784 152.6784 152.6784h482.0992c84.1728 0 152.6784-68.5056 152.6784-152.6784v-487.936c0-84.1728-68.5056-152.6784-152.6784-152.6784z m-44.7488 549.7856a43.6224 43.6224 0 0 1-31.1808 13.1072c-11.0592 0-22.0672-4.1472-30.5664-12.4928l-94.0544-92.2112v169.2672c0 24.1152-19.5584 43.6736-43.6736 43.6736s-43.6736-19.5584-43.6736-43.6736v-163.072l-84.1728 83.6096c-17.1008 16.9984-44.8 16.896-61.7984-0.2048-16.9984-17.1008-16.896-44.8 0.2048-61.7984l155.1872-154.1632c20.2752-20.1216 53.3504-20.224 73.728-0.2048l159.4368 156.3136c17.2032 16.9472 17.4592 44.6464 0.5632 61.8496z m-26.2144-308.3776H346.1632c-24.1152 0-43.6736-19.5584-43.6736-43.6736s19.5584-43.6736 43.6736-43.6736h336.0768c24.1152 0 43.6736 19.5584 43.6736 43.6736s-19.5584 43.6736-43.6736 43.6736z" fill="#6C6CEA" p-id="22282"></path><path d="M753.2032 116.3264H271.104c-84.1728 0-152.6784 68.5056-152.6784 152.6784v487.936c0 84.1728 68.5056 152.6784 152.6784 152.6784h146.8928c274.0736-72.8064 476.0064-322.6112 476.0064-619.5712 0-32.0512-2.4064-63.5392-6.912-94.3616-26.0096-47.2576-76.2368-79.36-133.888-79.36z m-44.7488 549.7856a43.6224 43.6224 0 0 1-31.1808 13.1072c-11.0592 0-22.0672-4.1472-30.5664-12.4928l-94.0544-92.2112v169.2672c0 24.1152-19.5584 43.6736-43.6736 43.6736s-43.6736-19.5584-43.6736-43.6736v-163.072l-84.1728 83.6096c-17.1008 16.9984-44.8 16.896-61.7984-0.2048-16.9984-17.1008-16.896-44.8 0.2048-61.7984l155.1872-154.1632c20.2752-20.1216 53.3504-20.224 73.728-0.2048l159.4368 156.3136c17.2032 16.9472 17.4592 44.6464 0.5632 61.8496z m-26.2144-308.3776H346.1632c-24.1152 0-43.6736-19.5584-43.6736-43.6736s19.5584-43.6736 43.6736-43.6736h336.0768c24.1152 0 43.6736 19.5584 43.6736 43.6736s-19.5584 43.6736-43.6736 43.6736z" fill="#757BF2" p-id="22283"></path><path d="M118.4256 269.0048v433.1008c68.864-4.352 134.7584-19.5072 196.0448-43.8784-11.8784-17.1008-10.24-40.6528 5.0176-55.808l155.1872-154.1632c20.2752-20.1216 53.3504-20.224 73.728-0.2048l23.2448 22.784c28.7744-34.7648 53.9648-72.6528 74.9568-113.0496H346.1632c-24.1152 0-43.6736-19.5584-43.6736-43.6736s19.5584-43.6736 43.6736-43.6736h336.0768c0.6144 0 1.2288 0.0512 1.8432 0.1024 16.7936-48.9472 27.8016-100.608 32.256-154.1632H271.104c-84.1728-0.0512-152.6784 68.4544-152.6784 152.6272z" fill="#8486F8" p-id="22284"></path><path d="M118.4256 269.0048v175.0528c70.5536-23.3984 135.68-58.7264 192.9216-103.6288a43.30496 43.30496 0 0 1-8.9088-26.368c0-24.1152 19.5584-43.6736 43.6736-43.6736h41.1136c42.1888-45.6704 77.8752-97.536 105.4208-154.0608H271.104c-84.1728 0-152.6784 68.5056-152.6784 152.6784z" fill="#8D92F8" p-id="22285"></path></svg>
                                上传LOGO
                            </a>
                        </div>
                    </div>
                </div>
                <div class="upload-success mt-3" id="upload-success" style="display: none"></div>
                <progress  id="upload-progress" class="progress progress-sm mt-3" value="0" max="100"/>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="mb-3">
                            <label class="form-label required">名称</label>
                            <input id="create-pkgname" type="text" class="form-control" placeholder="请输入APP名称">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="mb-3">
                            <label class="form-label">
                                KEY
                                <span class="form-help" data-bs-toggle="popover" data-bs-placement="top"
                                      data-bs-content="<p>此处的KEY值用于唯一标识Package,开放的API中会使用到,如果不填则随机生成</p>"
                                  data-bs-html="true">?</span>
                            </label>

                            <input id="create-key" type="text" class="form-control" placeholder="请输入APP KEY">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a  class="btn btn-link link-secondary" data-bs-dismiss="modal">取消</a>
                <a onclick="createApp()" class="btn btn-primary ms-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                    创建
                </a>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block base_script %}

<script>

     $(document).ready(function() {
         if('{{ app }}' != 'all'){
             $('#input-keywords').val('{{ app }}')
         }
     });

    function searchAPP() {
        var keywords = $('#input-keywords').val().trim();
        if(keywords){
            rute('/package/home/app='+keywords);
        }else{
            rute('/package/home/app=all');
        }

    };

    function uploadFile() {
        var formData = new FormData();
        var fileObj = document.getElementById("select-file").files[0];
        var fileName = fileObj.name;
        formData.append('file',fileObj);
        formData.append('filename',fileName);
        if(fileName){
            $.ajax({
                url: "/package/api/upload/logo",
                type: "POST",
                async:true,
                cache: false,
                processData: false,
                contentType: false,
                data: formData,
                beforeSend: function () {
                    $('#select-file').attr('disabled',true);
                    $('#upload-progress').show();
                },
                xhr: function() {
                    let newxhr = new XMLHttpRequest();
                    newxhr.upload.onprogress = function(e) {
                        let percent = parseInt((e.loaded / e.total) * 100);
                        document.getElementById("upload-progress").value = percent.toString();
                    };
                    return newxhr
                },
                complete: function(){
                    $('#select-file').attr('disabled',false);
                },
                success: function (data) {
                    if(data['status'] == 1){
                        $('#upload-success').show();
                        $('#upload-success').text(data['icon']);
                    }else {
                        Spop(SPOP_TYPE.error,data['msg']);
                        $('#select-file').empty();
                    }
                }
            });
        }else{
            Spop(SPOP_TYPE.error,'没有选择文件')
        }
    }

    function createApp() {
        var pkgname = $("#create-pkgname").val().trim();
        var key = $("#create-key").val().trim();
        var platform = $("input[name='platform']:checked").val();
        var icon = $('#upload-success').text();
        if(pkgname){
            $.ajax({
                url: "/package/api/create",
                type: "POST",
                async: false,
                data: {
                    pkgname: pkgname,
                    key: key,
                    platform: platform,
                    icon: icon
                },
                beforeSend: function () {
                    SwalLoading('Loading');
                },
                complete: function () {
                    swal.close();
                },
                success: function (data) {
                    if (data['status'] == 1) {
                        location.reload();
                    }
                    else{
                        Spop(SPOP_TYPE['error'],data['msg']);
                    }
                }
            });
        }else {
            Spop(SPOP_TYPE['error'],'APP名称不能为空');
        }
    }



    function viewVersionFile(pkgname,version) {
        if(version){
            rute('/package/list/app='+pkgname+'&version='+version)
        }else {
            $.ajax({
                url: "/package/api/version",
                type: "POST",
                async: false,
                data: {
                    pkgname: pkgname,
                },
                beforeSend: function () {
                    SwalLoading('Loading');
                    },
                complete: function () {
                    swal.close();
                    },
                success: function (data) {
                    if (data['version_list'].length > 0) {
                        rute('/package/list/app='+pkgname+'&version='+data['version_list'][0]);
                    }
                    else{
                        rute('/package/list/app='+pkgname+'&version=none');
                    }
                }
            });
        }

    }

</script>

{% endblock %}




